<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-blog-js.8da1853d9178e3a22e9c.css">.container{margin:0 auto;padding:0 2rem;max-width:1280px}.header{padding:3rem 0}.header__title{margin:0}.header__link{text-decoration:none}.header__link:focus,.header__link:hover{text-decoration:underline}html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;color:inherit;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45em -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:1.8rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.post-header{background:#2badba;padding:3rem 0;margin-bottom:3rem}.post-header__title{margin-bottom:0}.post-header__date{font-style:italic}</style><meta name="generator" content="Gatsby 2.0.38"/><title data-react-helmet="true">Server-side Rendering APIs | Gatsby Blog ðŸŽ‰</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="node,server,ssr,rendering"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#2badba"/><link as="script" rel="preload" href="/component---src-templates-blog-blog-js-768bc948a5b0e603287b.js"/><link as="script" rel="preload" href="/0-453e5cfc6bed9f1a73b8.js"/><link as="script" rel="preload" href="/app-eb73b6d1a80b29eb0e1d.js"/><link as="script" rel="preload" href="/webpack-runtime-a3724bcef8f041c92ea1.js"/><link rel="preload" href="/static/d/609/path---post-ssr-apis-727-022-QRae2HJf2wDtTEcMfC2exvLU8k.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header"><div class="container"><h1 class="header__title"><a class="header__link" href="/">Gatsby Blog ðŸŽ‰</a></h1></div></header><div class="post-header"><div class="container"><h1 class="post-header__title">Server-side Rendering APIs</h1><div class="post-header__date">5 December 2018</div></div></div><div class="container"><div class="blog-post-content"><h1>What are SSR APIs?</h1>
<p>While Gatsby pre-renders the site, there may be extra things you need to tell it to be able to render correctly. These functions act as hooks into that process to provide added behaviours where they're needed.</p>
<h1>Where do they live?</h1>
<p>SSR APIs can be called by Gatsby so long as they are stored within the <code>gatsby-ssr.js</code> file at the root of the project.</p>
<p>Not all SSR APIs are useful. In fact, most sites will not need to apply them. Here's some of the common ones if you do need to.</p>
<h2>Â onRenderBody</h2>
<p>Gatsby will do two passes over each page - one will work out the contents of each page's <code>&#x3C;body></code> and a second will provide that information to the renderers for the rest of the page. This can be useful if the contents affects the <code>&#x3C;head></code>, such as adding <code>&#x3C;meta></code> tags.</p>
<p>It gets passed several other functions such as <code>setHeadComponents</code> and <code>setBodyProps</code> to help get the data in the right place.</p>
<pre><code class="language-js">exports.onRenderBody = ({ setHeadComponents }) => {
  setHeadComponents(...);
}
</code></pre>
<h2>replaceRenderer</h2>
<p>The default Gatsby server renderer does a pretty good job at displaying pages as expected.</p>
<p>If there's something in your set up that manipulates React output (for example adding classes for styling), then the renderer will need to be replaced with something that knows how to do it.</p>
<p>It's unlikely this will need to be done manually. It is more useful to plugin developers who need to tap into the renderer themselves.</p>
<pre><code class="language-js">exports.replaceRenderer = ({ bodyComponent }) => {
  return renderToString(bodyComponent);
};
</code></pre>
<h2>wrapPageElement</h2>
<p>Sometimes it's useful to wrap the output in another component without having to do that across each individual page. This might be useful for something like analytics or even just some repeated UI like navigation.</p>
<p>The function gets passed information about the page element being generated at the time so it can be included in the wrapped component.</p>
<pre><code class="language-js">export const wrapPageElement = ({ element }) => {
  return &#x3C;Wrapper>{element}&#x3C;/Wrapper>;
};
</code></pre>
<h1>Â Where can I find out about the rest?</h1>
<p>The full reference of all SSR APIs is on the <a href="https://www.gatsbyjs.org/docs/ssr-apis/">Gatsby site</a>.</p></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-blog-js","jsonName":"post-ssr-apis-727","path":"/post/ssr-apis"};window.dataPath="609/path---post-ssr-apis-727-022-QRae2HJf2wDtTEcMfC2exvLU8k";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-eb73b6d1a80b29eb0e1d.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-0d5e6f4c41eb17bc3fb8.js"],"component---src-templates-blog-blog-js":["/component---src-templates-blog-blog-js.8da1853d9178e3a22e9c.css","/component---src-templates-blog-blog-js-768bc948a5b0e603287b.js"],"component---src-pages-404-js":["/component---src-pages-404-js.9b66bf50e3686a49616e.css","/component---src-pages-404-js-57c644a5417a6218b341.js"],"component---src-pages-index-js":["/component---src-pages-index-js.222a4112ac642ca656a8.css","/component---src-pages-index-js-7bfce79caae1d5d5998b.js"]};/*]]>*/</script><script src="/webpack-runtime-a3724bcef8f041c92ea1.js" async=""></script><script src="/app-eb73b6d1a80b29eb0e1d.js" async=""></script><script src="/0-453e5cfc6bed9f1a73b8.js" async=""></script><script src="/component---src-templates-blog-blog-js-768bc948a5b0e603287b.js" async=""></script></body></html>